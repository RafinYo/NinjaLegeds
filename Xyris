if game.PlaceId == 3956818381 then
    -- Clean up previous UI instances
    for i, v in pairs(game:GetService("CoreGui"):GetChildren()) do
        if v:FindFirstChild("MainFrameHolder") or v:FindFirstChild("NotificationHolder") then
            v:Destroy()
        end
    end

    -- Reset all global toggles
    getgenv().autoopencrystals = false
    getgenv().autobuyranks = false
    getgenv().autobuybelts = false
    getgenv().autobuyskills = false
    getgenv().autosell = false
    getgenv().autoswing = false
    getgenv().autosellpets = false

    -- Load Rayfield
    local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

    local Window = Rayfield:CreateWindow({
        Name = "Xyris Hub - Ninja Legends",
        LoadingTitle = "Loading Xyris Hub",
        LoadingSubtitle = "By Xyris Dev Team",
        ConfigurationSaving = {
            Enabled = true,
            FolderName = "XyrisHubStuff",
        },
        Discord = {
            Enabled = true,
            Invite = "3WtS2F7CaX", -- Discord invite link
            RememberJoins = true
        },
    })

    local Character = game.Players.LocalPlayer.Character

    -- Tabs and Sections
    local AutofarmTab = Window:CreateTab("Autofarm")
    local PetsTab = Window:CreateTab("Pets")
    local TeleportTab = Window:CreateTab("Teleport")
    local PlayerTab = Window:CreateTab("Player")
    local MiscTab = Window:CreateTab("Misc")

    -- Autofarm Toggles
    AutofarmTab:CreateToggle("Auto Swing", false, function(state)
        getgenv().autoswing = state
        while getgenv().autoswing do
            game:GetService("Players").LocalPlayer.ninjaEvent:FireServer("swingKatana")
            task.wait(0.1)
        end
    end)

    AutofarmTab:CreateToggle("Auto Sell", false, function(state)
        getgenv().autosell = state
        while getgenv().autosell do
            game:GetService("Players").LocalPlayer.ninjaEvent:FireServer("sell")
            task.wait(5)
        end
    end)

    -- Pet Crystals Dropdown and Button
    local SelectedCrystal
    PetsTab:CreateDropdown("Select Crystal", game:GetService("Workspace").mapCrystalsFolder:GetChildren(), function(crystal)
        SelectedCrystal = crystal
    end)

    PetsTab:CreateButton("Open Selected Crystal", function()
        if SelectedCrystal then
            local event = game:GetService("ReplicatedStorage").rEvents.openCrystalRemote
            event:InvokeServer("openCrystal", SelectedCrystal)
        else
            Rayfield:Notify({ Title = "Error", Content = "No crystal selected!", Duration = 3 })
        end
    end)

    -- Complete Island List for Teleporting
    local islands = {
        "Enchanted Island", "Astral Island", "Mystical Island", "Space Island",
        "Tundra Island", "Eternal Island", "Sandstorm", "Thunderstorm",
        "Ancient Inferno Island", "Midnight Shadow Island", "Mythical Souls Island",
        "Winter Wonder Island", "Golden Master Island", "Dragon Legend Island",
        "Cybernetic Legends Island", "Skystorm Ultraus Island", "Chaos Legends Island",
        "Soul Fusion Island", "Dark Elements Island", "Inner Peace Island",
        "Blazing Vortex Island"
    }

    -- Teleporting Section
    TeleportTab:CreateDropdown("Select Island", islands, function(island)
        local part = game:GetService("Workspace").islandUnlockParts[island]
        Character.HumanoidRootPart.CFrame = part.CFrame
    end)

    -- Player WalkSpeed and JumpPower Sliders
    PlayerTab:CreateSlider("WalkSpeed", 16, 500, 16, function(value)
        Character.Humanoid.WalkSpeed = value
    end)

    PlayerTab:CreateSlider("JumpPower", 50, 400, 50, function(value)
        Character.Humanoid.JumpPower = value
    end)

    -- Misc Section Buttons
    MiscTab:CreateButton("Unlock All Islands", function()
        for _, part in pairs(game:GetService("Workspace").islandUnlockParts:GetChildren()) do
            firetouchinterest(Character.HumanoidRootPart, part, 0)
            firetouchinterest(Character.HumanoidRootPart, part, 1)
        end
    end)

    MiscTab:CreateButton("Unlock All Elements", function()
        for _, element in pairs(game:GetService("ReplicatedStorage").Elements:GetChildren()) do
            game:GetService("ReplicatedStorage").rEvents.elementMasteryEvent:FireServer(element)
        end
    end)

    MiscTab:CreateButton("Infinite Double Jumps", function()
        game.Players.LocalPlayer.multiJumpCount.Value = 999999999
    end)

    -- Notify User on Load
    Rayfield:Notify({
        Title = "Xyris Hub Loaded",
        Content = "Enjoy using the script! Join our Discord for support.",
        Duration = 6.5,
        Image = 4483362458, -- Replace with your desired asset ID
        Actions = {
            Ignore = {
                Name = "Join Discord",
                Callback = function()
                    setclipboard("https://discord.gg/3WtS2F7CaX")
                end
            }
        }
    })
end
